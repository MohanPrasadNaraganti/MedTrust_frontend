{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mohanprasadnaraganti/Desktop/Fall-23/AdvWebProgramming/MedTrust/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mohanprasadnaraganti/Desktop/Fall-23/AdvWebProgramming/MedTrust/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/mohanprasadnaraganti/Desktop/Fall-23/AdvWebProgramming/MedTrust/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/mohanprasadnaraganti/Desktop/Fall-23/AdvWebProgramming/MedTrust/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/mohanprasadnaraganti/Desktop/Fall-23/AdvWebProgramming/MedTrust/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import'./login.css';import Register from'./Register';import{Link,useLocation}from'react-router-dom';import axios from'axios';import Header from'../headers/Header';import Userpage from'./Userpage';import userReducer from'../reducers/userReducer';import{useDispatch}from'react-redux';import{loginUser}from'../actions/loginAction';import{cartAddAction}from'../actions/cartAction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),loggedUser=_useState2[0],setLoggedUser=_useState2[1];var dispatch=useDispatch();var location=useLocation();var _useState3=useState({email:'',password:''}),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var onChangeInput=function onChangeInput(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},name,value)));};var loginSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var data,dataToSend;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return axios.post('http://localhost:3001/user/login',_objectSpread({},user));case 4:data=_context.sent;setLoggedUser(data.data.userDetails);// console.log(loggedUser, \"login\")\ndispatch(cartAddAction(data.data.userDetails.cart));dispatch(loginUser(data.data.userDetails));dataToSend={userDetails:data.data.userDetails};localStorage.setItem('myData',JSON.stringify(dataToSend));window.location.href='/Userpage';// alert(\"logged in!!\")\n_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);alert(_context.t0.response.data.msg);case 16:case\"end\":return _context.stop();}},_callee,null,[[1,13]]);}));return function loginSubmit(_x){return _ref.apply(this,arguments);};}();// useEffect(() => {\n//     console.log(loggedUser, \"effect\")\n// }, [loggedUser])\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"login-page\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"login-form \",onSubmit:loginSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",required:true,placeholder:\"Email\",value:user.email,onChange:onChangeInput}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",required:true,autoComplete:\"on\",placeholder:\"Password\",value:user.password,onChange:onChangeInput}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Not a Active User , Register Now! \"}),/*#__PURE__*/_jsx(Link,{to:{pathname:\"/register\",state:loggedUser},children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Register\"})})]})]})});}export default Login;","map":{"version":3,"names":["React","useEffect","useState","Register","Link","useLocation","axios","Header","Userpage","userReducer","useDispatch","loginUser","cartAddAction","jsx","_jsx","jsxs","_jsxs","Login","_useState","_useState2","_slicedToArray","loggedUser","setLoggedUser","dispatch","location","_useState3","email","password","_useState4","user","setUser","onChangeInput","e","_e$target","target","name","value","_objectSpread","_defineProperty","loginSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","dataToSend","wrap","_callee$","_context","prev","next","preventDefault","post","sent","userDetails","cart","localStorage","setItem","JSON","stringify","window","href","t0","alert","response","msg","stop","_x","apply","arguments","className","children","onSubmit","type","required","placeholder","onChange","autoComplete","to","pathname","state"],"sources":["/Users/mohanprasadnaraganti/Desktop/Fall-23/AdvWebProgramming/MedTrust/frontend/src/components/Login.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport './login.css'\r\nimport Register from './Register'\r\nimport { Link, useLocation } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport Header from '../headers/Header'\r\nimport Userpage from './Userpage'\r\nimport userReducer from '../reducers/userReducer'\r\nimport { useDispatch } from 'react-redux'\r\nimport { loginUser } from '../actions/loginAction'\r\nimport { cartAddAction } from '../actions/cartAction'\r\n\r\nfunction Login() {\r\n    const [loggedUser, setLoggedUser] = useState(\"\")\r\n    const dispatch = useDispatch();\r\n    const location = useLocation()\r\n    const [user, setUser] = useState({\r\n        email: '', password: ''\r\n    })\r\n\r\n    const onChangeInput = e => {\r\n        const { name, value } = e.target;\r\n        setUser({ ...user, [name]: value })\r\n    }\r\n\r\n    const loginSubmit = async e => {\r\n        e.preventDefault()\r\n        try {\r\n            const data = await axios.post('http://localhost:3001/user/login', { ...user })\r\n            setLoggedUser(data.data.userDetails)\r\n            // console.log(loggedUser, \"login\")\r\n            dispatch(cartAddAction(data.data.userDetails.cart))\r\n            dispatch(loginUser(data.data.userDetails));\r\n            const dataToSend = { userDetails : data.data.userDetails};\r\n            localStorage.setItem('myData', JSON.stringify(dataToSend));\r\n            window.location.href = '/Userpage';\r\n            // alert(\"logged in!!\")\r\n\r\n        } catch (err) {\r\n            alert(err.response.data.msg)\r\n        }\r\n    }\r\n    // useEffect(() => {\r\n    //     console.log(loggedUser, \"effect\")\r\n    // }, [loggedUser])\r\n\r\n    return (\r\n        <div className=\"login-page\">\r\n            <form className=\"login-form \" onSubmit={loginSubmit}>\r\n                <h2>Login</h2>\r\n                <input type=\"email\" name=\"email\" required\r\n                    placeholder=\"Email\" value={user.email} onChange={onChangeInput} />\r\n\r\n                <input type=\"password\" name=\"password\" required autoComplete=\"on\"\r\n                    placeholder=\"Password\" value={user.password} onChange={onChangeInput} />\r\n\r\n                <div className=\"row\">\r\n                    <button type=\"submit\">Login</button>\r\n                    <p>Not a Active User , Register Now! </p>\r\n                    <Link to={{ pathname: \"/register\", state: loggedUser }}><button type=\"submit\" >Register</button></Link>\r\n\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}