{"ast":null,"code":"import _toConsumableArray from\"/Users/mohanprasadnaraganti/Desktop/Fall-23/AdvWebProgramming/MedTrust/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/mohanprasadnaraganti/Desktop/Fall-23/AdvWebProgramming/MedTrust/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/mohanprasadnaraganti/Desktop/Fall-23/AdvWebProgramming/MedTrust/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mohanprasadnaraganti/Desktop/Fall-23/AdvWebProgramming/MedTrust/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/mohanprasadnaraganti/Desktop/Fall-23/AdvWebProgramming/MedTrust/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState,useEffect}from'react';import{Link,useParams}from'react-router-dom';import axios from'axios';import'./ViewProduct.css';import Search from'../search/Search';import{useDispatch,useSelector}from'react-redux';import cartReducer from'../reducers/cartReducer';import{cartAddAction}from'../actions/cartAction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ViewProduct(){var _useParams=useParams(),id=_useParams.id;var counter=true;var cartdata=useSelector(function(state){return state.cart.cart;});// console.log(cartdata,\"cartdata\")\nvar _useState=useState({}),_useState2=_slicedToArray(_useState,2),productsdata=_useState2[0],setProductsData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),productsArray=_useState4[0],setProductsArray=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),productdetails=_useState6[0],setProductDetails=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),token=_useState8[0],setToken=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),data=_useState10[0],setData=_useState10[1];var firstLogin=localStorage.getItem('myData');var dispatch=useDispatch();var _useState11=useState(cartdata),_useState12=_slicedToArray(_useState11,2),cartItems=_useState12[0],setCartItems=_useState12[1];// console.log(productdetails, \"view\")\nuseEffect(function(){var fetchProduct=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _data$data,_data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:3001/api/products/\".concat(id));case 3:_data=_context.sent;setProductDetails((_data$data=_data.data)===null||_data$data===void 0?void 0:_data$data.product);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);alert(_context.t0.response.data.msg);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function fetchProduct(){return _ref.apply(this,arguments);};}();fetchProduct();},[cartdata]);var onAdd=function onAdd(product){if(firstLogin){var exist=cartItems.find(function(x){return x._id===product._id;});if(exist){var updatedCartItems=cartItems.map(function(x){return x._id===product._id?_objectSpread(_objectSpread({},exist),{},{qty:exist.qty+1}):x;});setCartItems(updatedCartItems);dispatch(cartAddAction(updatedCartItems));}else{var _updatedCartItems=[].concat(_toConsumableArray(cartItems),[_objectSpread(_objectSpread({},product),{},{qty:1})]);setCartItems(_updatedCartItems);dispatch(cartAddAction(_updatedCartItems));}}else{alert(\"Please Login\");}};var onRemove=function onRemove(product){var exist=cartItems.find(function(x){return x._id===product._id;});if(exist.qty===1){setCartItems(cartItems.filter(function(x){return x._id!==product._id;}));}else{setCartItems(cartItems.map(function(x){return x._id===product._id?_objectSpread(_objectSpread({},exist),{},{qty:exist.qty-1}):x;}));}};return/*#__PURE__*/_jsx(\"div\",{className:\"custom-product-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"custom-card text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"custom-card-top\",children:/*#__PURE__*/_jsx(\"img\",{src:productdetails.imageURL,style:{marginTop:\"20px\",width:\"350px\",height:\"350px\"},alt:\"Product\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"custom-card-body text-dark\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"custom-product-details\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"custom-card-title\",children:productdetails.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"custom-card-text\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Content:\"}),\" \",productdetails.content]}),/*#__PURE__*/_jsxs(\"p\",{className:\"custom-card-text\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Price:\"}),\" \\u20B9\",productdetails.price]}),/*#__PURE__*/_jsxs(\"p\",{className:\"custom-card-text\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Description:\"}),\" \",productdetails.description]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"custom-button-section\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"custom-button\",onClick:function onClick(){return onAdd(productdetails);},children:[\"Add to Cart \",/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-shopping-cart\"})]})})]})]})});}export default ViewProduct;","map":{"version":3,"names":["React","useContext","useState","useEffect","Link","useParams","axios","Search","useDispatch","useSelector","cartReducer","cartAddAction","jsx","_jsx","jsxs","_jsxs","ViewProduct","_useParams","id","counter","cartdata","state","cart","_useState","_useState2","_slicedToArray","productsdata","setProductsData","_useState3","_useState4","productsArray","setProductsArray","_useState5","_useState6","productdetails","setProductDetails","_useState7","_useState8","token","setToken","_useState9","_useState10","data","setData","firstLogin","localStorage","getItem","dispatch","_useState11","_useState12","cartItems","setCartItems","fetchProduct","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_data$data","_data","wrap","_callee$","_context","prev","next","get","concat","sent","product","t0","alert","response","msg","stop","apply","arguments","onAdd","exist","find","x","_id","updatedCartItems","map","_objectSpread","qty","_toConsumableArray","onRemove","filter","className","children","src","imageURL","style","marginTop","width","height","alt","title","content","price","description","onClick"],"sources":["/Users/mohanprasadnaraganti/Desktop/Fall-23/AdvWebProgramming/MedTrust/frontend/src/ProductsPage/ViewProduct.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from 'react'\r\nimport { Link, useParams } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport './ViewProduct.css'\r\nimport Search from '../search/Search'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport cartReducer from '../reducers/cartReducer'\r\nimport { cartAddAction } from '../actions/cartAction'\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction ViewProduct() {\r\n\r\n  let { id } = useParams()\r\n  const counter = true;\r\n  const cartdata = useSelector(state => state.cart.cart);\r\n  // console.log(cartdata,\"cartdata\")\r\n  let [productsdata, setProductsData] = useState({})\r\n  let [productsArray, setProductsArray] = useState([])\r\n  const [productdetails, setProductDetails] = useState({})\r\n  const [token, setToken] = useState(false)\r\n  const [data, setData] = useState({})\r\n\r\n  const firstLogin = localStorage.getItem('myData')\r\n  const dispatch = useDispatch()\r\n\r\n  \r\n  const [cartItems, setCartItems] = useState(cartdata)\r\n  // console.log(productdetails, \"view\")\r\n\r\n  useEffect(() => {\r\n\r\n    const fetchProduct = async () => {\r\n      try {\r\n        const data = await axios.get(`http://localhost:3001/api/products/${id}`)\r\n\r\n        setProductDetails(data.data?.product)\r\n\r\n      } catch (err) {\r\n        alert(err.response.data.msg)\r\n      }\r\n    }\r\n    fetchProduct();\r\n\r\n  }, [cartdata])\r\n\r\n\r\n\r\n  const onAdd = (product) => {\r\n    if (firstLogin) {\r\n      const exist = cartItems.find((x) => x._id === product._id);\r\n\r\n      if (exist) {\r\n        const updatedCartItems = cartItems.map((x) =>\r\n          x._id === product._id ? { ...exist, qty: exist.qty + 1 } : x\r\n        );\r\n        setCartItems(updatedCartItems);\r\n        dispatch(cartAddAction(updatedCartItems));\r\n      } else {\r\n        const updatedCartItems = [...cartItems, { ...product, qty: 1 }];\r\n        setCartItems(updatedCartItems);\r\n        dispatch(cartAddAction(updatedCartItems));\r\n      }\r\n    }\r\n    else{\r\n      alert(\"Please Login\")\r\n    }\r\n\r\n  };\r\n  const onRemove = (product) => {\r\n    const exist = cartItems.find((x) => x._id === product._id);\r\n    if (exist.qty === 1) {\r\n      setCartItems(cartItems.filter((x) => x._id !== product._id));\r\n    } else {\r\n      setCartItems(\r\n        cartItems.map((x) =>\r\n          x._id === product._id ? { ...exist, qty: exist.qty - 1 } : x\r\n        )\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"custom-product-card\">\r\n      <div className=\"custom-card text-center\">\r\n        <div className=\"custom-card-top\">\r\n          <img src={productdetails.imageURL} style={{ marginTop: \"20px\", width: \"350px\", height: \"350px\" }} alt=\"Product\" />\r\n        </div>\r\n        <div className=\"custom-card-body text-dark\">\r\n          <div className=\"custom-product-details\">\r\n            <h6 className=\"custom-card-title\">{productdetails.title}</h6>\r\n            <p className=\"custom-card-text\"><b>Content:</b> {productdetails.content}</p>\r\n            <p className=\"custom-card-text\"><b>Price:</b> â‚¹{productdetails.price}</p>\r\n            <p className=\"custom-card-text\"><b>Description:</b> {productdetails.description}</p>\r\n          </div>\r\n          <div className=\"custom-button-section\">\r\n            <button className=\"custom-button\" onClick={() => onAdd(productdetails)}>\r\n              Add to Cart <i className=\"fas fa-shopping-cart\"></i>\r\n            </button>\r\n            {/* <button style={{ marginLeft: \"20px\" }} className=\"custom-button\">\r\n            <Link to={`/viewproduct/${productdetails._id}`}>View</Link>\r\n          </button> */}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n\r\n  )\r\n}\r\n\r\nexport default ViewProduct\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}