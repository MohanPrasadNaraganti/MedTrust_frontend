{"ast":null,"code":"import _slicedToArray from\"/Users/mohanprasadnaraganti/Desktop/Fall-23/AdvWebProgramming/MedTrust/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState,useEffect}from'react';import axios from'axios';import Product from'../components/Product';import'./ProductItem.css';import{Link,useParams}from'react-router-dom';import{cartAddAction}from'../actions/cartAction';import Header from'../headers/Header';import{useDispatch,useSelector}from'react-redux';import cartReducer from'../reducers/cartReducer';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ProductItem(_ref){var product=_ref.product,onAdd=_ref.onAdd,onRemove=_ref.onRemove;var cart=[];var userDetails=useSelector(function(state){return state.user;});var _useState=useState(cart),_useState2=_slicedToArray(_useState,2),cartItems=_useState2[0],setCartItems=_useState2[1];var counter=true;var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),productsdata=_useState4[0],setProductsData=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),productsArray=_useState6[0],setProductsArray=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),productdetails=_useState8[0],setProductDetails=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),token=_useState10[0],setToken=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),data=_useState12[0],setData=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),role=_useState14[0],setRole=_useState14[1];var dispatch=useDispatch();useEffect(function(){var storedData=localStorage.getItem('myData');if(storedData){var _userDetails$user;var _data=JSON.parse(storedData);setRole(userDetails===null||userDetails===void 0?void 0:(_userDetails$user=userDetails.user)===null||_userDetails$user===void 0?void 0:_userDetails$user.role);}},[role]);// console.log(\"prod\", cartItems)\n// const onAdd = (product) => {\n//   if (firstLogin) {\n//     const exist = cartItems.find((x) => x.id === product.id);\n//     if (exist) {\n//       setCartItems(\n//         cartItems.map((x) =>\n//           x._id === product._id ? { ...exist, qty: exist.qty + 1 } : x\n//         )\n//       );\n//       dispatch(cartAddAction(cartItems))\n//       console.log(cartItems.length)\n//     } else {\n//       setCartItems([...cartItems, { ...product, qty: 1 }]);\n//       dispatch(cartAddAction(cartItems))\n//     }\n//   }\n//   else {\n//     alert(\"please login to add\")\n//   }\n// };\n// const onRemove = (product) => {\n//   if (firstLogin) {\n//     const exist = cartItems.find((x) => x._id === product._id);\n//     console.log(product)\n//     if (exist) {\n//       setCartItems(\n//         cartItems.map((x) =>\n//           x._id === product._id ? { ...exist, qty: exist.qty + 1 } : x\n//         )\n//       );\n//       console.log(cartItems.length)\n//     } else {\n//       setCartItems([...cartItems, { ...product, qty: 1 }]);\n//     }\n//   }\n//   else {\n//     alert(\"please login to add\")\n//   }\n// };\nreturn/*#__PURE__*/_jsx(_Fragment,{children:role===0?/*#__PURE__*/_jsxs(\"div\",{className:\"card text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-top\",children:/*#__PURE__*/_jsx(\"img\",{src:product.imageURL,style:{width:\"100px\",height:\"100px\"}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body text-dark\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{height:\"500px\"},children:[/*#__PURE__*/_jsx(\"h6\",{className:\"card-title\",children:product.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Content:\"}),\" \",product.content]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Price: \"}),\"  \\u20B9\",product.price]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Description: \"}),\" \",product.description]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"button\",{className:\"button\",onClick:function onClick(){return onAdd(product);},children:[\"Add to Cart \",/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-shopping-cart\"})]}),/*#__PURE__*/_jsx(\"button\",{style:{marginLeft:\"20px\"},className:\"button\",children:/*#__PURE__*/_jsx(Link,{to:\"/viewproduct/\".concat(product._id),children:\"View\"})})]})]})]}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-top\",children:/*#__PURE__*/_jsx(\"img\",{src:product.imageURL,style:{width:\"100px\",height:\"100px\"}})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body text-dark\",children:/*#__PURE__*/_jsxs(\"div\",{style:{height:\"500px\"},children:[/*#__PURE__*/_jsx(\"h6\",{className:\"card-title\",children:product.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Content:\"}),\" \",product.content]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Price: \"}),\"  \\u20B9\",product.price]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Description: \"}),\" \",product.description]})]})})]})})});}export default ProductItem;","map":{"version":3,"names":["React","useContext","useState","useEffect","axios","Product","Link","useParams","cartAddAction","Header","useDispatch","useSelector","cartReducer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductItem","_ref","product","onAdd","onRemove","cart","userDetails","state","user","_useState","_useState2","_slicedToArray","cartItems","setCartItems","counter","_useState3","_useState4","productsdata","setProductsData","_useState5","_useState6","productsArray","setProductsArray","_useState7","_useState8","productdetails","setProductDetails","_useState9","_useState10","token","setToken","_useState11","_useState12","data","setData","_useState13","_useState14","role","setRole","dispatch","storedData","localStorage","getItem","_userDetails$user","JSON","parse","children","className","src","imageURL","style","width","height","title","content","price","description","onClick","marginLeft","to","concat","_id"],"sources":["/Users/mohanprasadnaraganti/Desktop/Fall-23/AdvWebProgramming/MedTrust/frontend/src/product/ProductItem.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport Product from '../components/Product'\r\nimport './ProductItem.css'\r\nimport { Link, useParams } from 'react-router-dom'\r\nimport { cartAddAction } from '../actions/cartAction'\r\nimport Header from '../headers/Header'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport cartReducer from '../reducers/cartReducer'\r\n\r\nfunction ProductItem({ product, onAdd , onRemove }) {\r\n\r\n  const cart = []\r\n  const userDetails = useSelector(state => state.user);\r\n  const [cartItems, setCartItems] = useState(cart)\r\n  const counter = true;\r\n  let [productsdata, setProductsData] = useState({})\r\n  let [productsArray, setProductsArray] = useState([])\r\n  const [productdetails, setProductDetails] = useState({})\r\n  const [token, setToken] = useState(false)\r\n  const [data, setData] = useState({})\r\n  const [role, setRole] = useState(0)\r\n\r\n  const dispatch = useDispatch()\r\n\r\n  useEffect(() => {\r\n   \r\n    const storedData = localStorage.getItem('myData');\r\n    if (storedData) {\r\n        const data = JSON.parse(storedData);\r\n        setRole(userDetails?.user?.role)\r\n    }\r\n   \r\n  \r\n}, [role])\r\n  // console.log(\"prod\", cartItems)\r\n\r\n  // const onAdd = (product) => {\r\n\r\n  //   if (firstLogin) {\r\n\r\n  //     const exist = cartItems.find((x) => x.id === product.id);\r\n  //     if (exist) {\r\n\r\n  //       setCartItems(\r\n  //         cartItems.map((x) =>\r\n  //           x._id === product._id ? { ...exist, qty: exist.qty + 1 } : x\r\n  //         )\r\n  //       );\r\n  //       dispatch(cartAddAction(cartItems))\r\n  //       console.log(cartItems.length)\r\n\r\n  //     } else {\r\n  //       setCartItems([...cartItems, { ...product, qty: 1 }]);\r\n  //       dispatch(cartAddAction(cartItems))\r\n  //     }\r\n  //   }\r\n\r\n  //   else {\r\n  //     alert(\"please login to add\")\r\n  //   }\r\n  // };\r\n  // const onRemove = (product) => {\r\n  //   if (firstLogin) {\r\n\r\n  //     const exist = cartItems.find((x) => x._id === product._id);\r\n  //     console.log(product)\r\n  //     if (exist) {\r\n\r\n  //       setCartItems(\r\n  //         cartItems.map((x) =>\r\n  //           x._id === product._id ? { ...exist, qty: exist.qty + 1 } : x\r\n  //         )\r\n  //       );\r\n  //       console.log(cartItems.length)\r\n\r\n  //     } else {\r\n  //       setCartItems([...cartItems, { ...product, qty: 1 }]);\r\n  //     }\r\n  //   }\r\n\r\n  //   else {\r\n  //     alert(\"please login to add\")\r\n  //   }\r\n  // };\r\n\r\n\r\n\r\n  return (\r\n    <>\r\n    { role === 0 ? \r\n    <div className=\"card text-center\">\r\n      <div className=\"card-top\" ><img src={product.imageURL} style={{ width: \"100px\", height: \"100px\" }} /></div>\r\n      <div className=\"card-body text-dark\">\r\n        <div style={{ height: \"500px\" }}>\r\n          <h6 className=\"card-title\">{product.title}</h6>\r\n          <p className=\"card-text\"><b>Content:</b> {product.content}</p>\r\n          <p className=\"card-text\"><b>Price: </b>  ₹{product.price}</p>\r\n          <p className=\"card-text\"><b>Description: </b> {product.description}</p>\r\n        </div>\r\n        <div>\r\n          <button className=\"button\" onClick={() => onAdd(product)}>Add to Cart <i className=\"fas fa-shopping-cart\"></i></button>\r\n          <button style={{ marginLeft: \"20px\" }} className=\"button\" ><Link to={`/viewproduct/${product._id}`}>View</Link></button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    : <>\r\n    <div className=\"card text-center\">\r\n      <div className=\"card-top\" ><img src={product.imageURL} style={{ width: \"100px\", height: \"100px\" }} /></div>\r\n      <div className=\"card-body text-dark\">\r\n        <div style={{ height: \"500px\" }}>\r\n          <h6 className=\"card-title\">{product.title}</h6>\r\n          <p className=\"card-text\"><b>Content:</b> {product.content}</p>\r\n          <p className=\"card-text\"><b>Price: </b>  ₹{product.price}</p>\r\n          <p className=\"card-text\"><b>Description: </b> {product.description}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    </>\r\n    }\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ProductItem\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}